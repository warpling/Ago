<head>
  <title>ago-meteor</title>
</head>

<body>
    {{> fbconnect}}
    {{> page}}
</body>

<template name="page">
    <div class="overlay-box content">
            {{#constant}}
            <div id="header">
                <object id="clock" data="clock.svg" type="image/svg+xml"></object>
                <h1 id="title">Ago</h1>
            </div>
            {{/constant}}
            <div class="vertically-centered">
                {{#if fbApiInit}}
                    {{#if fbAuthorized}}
                        {{> timeMachine}}
                    {{else}}
                        {{> greeting}}
                    {{/if}}
                {{else}}
                    {{> loading}}
                {{/if}}
            </div>
        {{> footer}}
    </div>
    <div class="bg-image blur" style="background-image:url('{{imagePath}}')"></div>
</template>



<template name="fbconnect">
    <div id="fb-root"></div>
    {{connect}}
</template>

<template name="fbconnect-button">
    <div id="fb-button">
        <fb:login-button show-faces="false" width="200" max-rows="1" scope="publish_actions">
        </fb:login-button>
    </div>
</template>



<template name="loading">
    <div class="center-block">
        <h2>Loading…</h2>
    </div>
</template>

<template name="greeting">
    <div class="center-block">
        <div style="width:600px; display:inline-block; text-align:left">
            <h2>What were you doing one year ago?</h2>
            <h2>Where were you? Who were you?</h2>
            <h2 class="underlined-link" id="find-out">Find out.</h2>
        </div>
    </div>
</template>

<template name="timeMachine">
    <div class="center-block">
    {{#if yearAgoStatusMessage}}
        {{#if error}}
            <div class="error">
                <h1>Time-machine fell apart, give us a sec…</h1>
            </div>
        {{else}}
            <div id="status">
                <div id="time">
                    <h2>one</h2>
                    <h2>year ago…</h2>
                </div>
                <div id="message">
                    <h2>{{yearAgoStatusMessage}}</h2>
                </div>
            </div>
        {{/if}}
    {{else}}
        <h2>Hold tight{{getFirstName}}, we're about to go back in time.</h2>
        <h2>{{funnyMessage}}</h2>
    {{/if}}
    </div>
</template>

<template name="footer">
    <div id="footer">
        <h3>A little experiment using <a href="http://meteor.com/" alt="What's Meteor?">Meteor</a> by <a href="https://twitter.com/warpling" alt="You should probably follow me.">Ryan McLeod</a></h3>
    </div>
</template>
