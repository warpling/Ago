<head>
  <title>ago-meteor</title>
</head>

<body>
    {{> fbconnect}}
    {{> page}}
</body>

<template name="page">
    <div class="overlay-box">
        <div class="content">
            {{#constant}}
            <div id="header">
                <object class="verticaly-centered-block" id="clock" data="clock.svg" type="image/svg+xml"></object>
                <h1 class="verticaly-centered-block" id="title">Ago</h1>
            </div>
            {{/constant}}

            {{#if fbApiInit}}
                {{#if fbAuthorized}}
                    {{> timeMachine}}
                {{else}}
                    {{> greeting}}
                {{/if}}
            {{else}}
                {{loading}}
            {{/if}}
        </div>
        <!-- {{> footer}} -->
    </div>
    <div class="bg-image blur" style="background-image:url('{{imagePath}}')"></div>
</template>

<template name="greeting">
    <div class="static-message">
        <h2>What were you doing one year ago?</h2>
        <h2>Where were you? Who were you?</h2>
        <h2 class="underlined find-out">Find out.</h2>
    </div>
</template>

<template name="fbconnect">
    <div id="fb-root"></div>
    {{connect}}
</template>

<template name="fbconnect-button">
    <div id="fb-button">
        <fb:login-button show-faces="false" width="200" max-rows="1" scope="publish_actions">
        </fb:login-button>
    </div>
</template>

<template name="timeMachine">
        {{#if yearAgoStatusMessage}}
            {{#if error}}
                <div class="error">
                    <h1>Time machine fell apart, one sec…</h1>
                </div>
            {{else}}
                <div id="status" class="static-message">
                    <div id="time">
                        <h2>one&nbsp;</h2>
                        <h2>year ago…</h2>
                    </div>
                    <div id="message">
                        <h2>{{yearAgoStatusMessage}}</h2>
                    </div>
                </div>
            {{/if}}
        {{else}}
            <h2>Hold tight{{getFirstName}}, we're about to go back in time.</h2>
            <h2>Yes, shut up, this is a real time machine.</h2>
        {{/if}}
    </div>
</template>

<template name="loading">
    <div class="static-message">
        <h2>Loading…</h2>
    </div>
</template>

<template name="footer">
    <div id="footer">
        <h5>His name was Ryan McLeod</h5>
    </div>
</template>
